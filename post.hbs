{{!< default}}

<div class="content-area">
    <main class="site-main">
        {{#post}}
            <article class="{{post_class}}{{#unless feature_image}} no-image{{/unless}} single-post">
                {{> post-header single=true number_date=true big_title=true}}
                {{> post-media ratio="horizontal"}}
                <div class="post-content kg-canvas u-text-format">
                    {{content}}
                </div>
                <div class="container medium">
                </div>
            </article>
            {{> post-navigation}}
        {{/post}}
        {{> comment}}
    </main>
</div>

{{#if @member}}
<script type="text/javascript">
    var karma = new amplitude.Identify().add('karma', 1);
    amplitude.getInstance().identify(karma);
    amplitude.getInstance().logEvent('Viewed Post');
    $(function () {
        var txt = $(".gh-content")[0].textContent,
            words = txt.replace(/[^\w ]/g, "").split(/\s+/).length + " words, ";
        function numberWithCommas(x) {
            x = x.toString();
            var pattern = /(-?\d+)(\d{3})/;
            while (pattern.test(x))
                x = x.replace(pattern, "$1,$2");
            return x;
        }
        var wordCount = numberWithCommas(words);
        $('.gh-wordcount').html(wordCount);
    });
</script>
{{/if}}
